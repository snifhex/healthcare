<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Update Data</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i" rel="stylesheet">
    <link href="css/admin.css" rel="stylesheet" media="all">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js@1.0.0-beta.34/dist/web3.js"></script>
    <script src="data.js"></script>


</head>

<body>
    <div class="page-wrapper bg-dark p-t-45 p-b-50">
        <div class="wrapper wrapper--w900">
            <div class="card card-6">
                <div class="card-heading">
                    <h2 class="title">Enter Data to update on Blockchain</h2>
                </div>
                <div class="card-body">
                    <form method="POST">
                        <div class="form-row">
                            <div class="name">Enter Name</div>
                            <div class="value">
                                <input id = "name" class="input--style-6" type="text" name="full_name">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="name">Email address</div>
                            <div class="value">
                                <div class="input-group">
                                    <input id = "email" class="input--style-6" type="email" name="email" placeholder="example@email.com">
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                                <div class="name">Heart Rate</div>
                                <div class="value">
                                    <input id = "heartR" class="input--style-6" type="text" name="full_name">
                                </div>
                            </div>
                            <div class="form-row">
                                    <div class="name">Body Temperature</div>
                                    <div class="value">
                                        <input id = "temp" class="input--style-6" type="text" name="full_name">
                                    </div>
                                </div>
    
                    </form>
                </div>
                <div class="card-footer">
                    <button id = "button" class="btn btn--radius-2 btn--blue-2" type="submit">Update Data</button>
                </div>
            </div>
        </div>
    </div>





<script>

         if (typeof web3 !== 'undefined') {
                web3 = new Web3(web3.currentProvider);
            } else {
                // set the provider you want from Web3.providers
                web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
                
            }

    web3.eth.defaultAccount = web3.eth.accounts[0];
    web3.eth.getAccounts().then(result => {accountAddress = result[0]});
    var HealthcareContract = new web3.eth.Contract(abi, contractAddress);

    $("#button").click(function() {
        HealthcareContract.methods.updateData($("#name").val(), $("#email").val(), $("#heartR").val(), $("#temp").val())
        .send({ from: accountAddress})
        .then(receipt => { });
    });

    // patient = HealthcareContract.methods.getPatient($("#").val()).call({from: accountAddress}, (error, result) => {})
    // .then(result => {console.log(result)});

    // HealthcareContract.methods.getPatientCount().call({from: accountAddress}, (error, result) => {})
    // .then((result) => {console.log(result)});

</script>







</body>

</html>
